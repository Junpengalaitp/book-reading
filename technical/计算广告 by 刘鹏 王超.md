# 第一部分 在线广告市场与背景

## 第一章 在线广告综述
### 1.1 免费模式与互联网核心资产
* 免费模式
  * 将那些能够规模化、个性化传播信息的商品，以边际成本的价格出售。
* 核心资产
  * 流量
    * 在产品本身功能之外夹带一些付费内容，用来流量变现。
  * 数据
    * 根据用户留下的数据，调整投放付费内容的策略以提高效率。
  * 影响力
    * 你的产品或内容获得了高于普通水准的关注与信任。投放产品时可以获得品牌溢价。

### 1.2 大数据与广告的关系
* 4V特征
  * volume
  * variety
  * velocity
  * value
* 实践特征
  * 行为数据
    * 传统行业的数据处理任务大多是交易数据，要求高一致性和实时性。
    * 非必须记录的数据就是行为数据。
      * 规模巨大
      * 较低一致性要求
  * 全量加工
    * A类问题：可以通过采样大大减少数据处理复杂度。
    * B类问题：不能通过只处理一小部分数据达到全量处理的效果。
      * 个性化推送和计算广告，需要针对每个人定制
  * 自动化应用
    * 洞察
      * 对数据统计分析后得到整体的结果报表，决策者根据报表决策。
    * 自动化
      * 将数据处理的结果直接送给对业务进行自动决策的引擎。

### 1.3 广告的定义与目的
* 定义
  * 由已确定的出资人通过各种媒介进行有关产品的，通常是有偿的、有组织的、综合的、劝服性的非人员的信息传播活动。
* 根本目的
  * 广告主通过媒体达到低成本的用户接触。
* 一切付费的信息、产品或服务的传播渠道，都是广告

### 1.4 在线广告表现形式
* 常见类型
  * 横幅广告
  * 文字链广告
  * 富媒体广告
  * 视频广告
  * 交互式广告
  * 社交广告
  * 移动广告
  * 邮件营销广告
  * 激励广告
  * 团购
  * 游戏联运
  * 固定位导航

### 1.5 在线广告简史
* 展示广告，基本就是将传统模式搬到线上
* 定向广告
  * 受众定向
  * 广告投放
* 竞价广告
* 搜索广告
* 上下文广告
* 广告交易平台
## 第二章 在线广告基础
### 2.1 广告有效性原理
* 曝光阶段
  * 广告在物理上展现出来的过程
* 关注阶段
  * 受众从物理上接触到广告
* 理解阶段
  * 用户理解广告传达的信息
* 接受阶段
  * 用户认可广告信息
* 保持阶段
  * 广告长时间影响用户的选择
* 决策阶段
  * 广告带来用户转化

### 2.2 互联网广告的技术特点
* 技术和计算导向
* 效果的可衡量性
* 创意和投放方式的标准化
* 媒体概念的多样化
* 数据驱动的投放决策

### 2.3 计算广告的核心问题
* 为一系列用户与上下文的组合找到最合适的广告投放策略以优化整体广告活动的利润。
#### 2.3.1 广告收入的分解
* 点击率(Click Through Rate, CTR): 广告展示次数和点击次数比
* 到达率: 落地页成功打开次数与点击次数比
* 转化率(Conversion Rate, CVR): 用户付费和到达率的比
* CPM: 千次展示的收益
#### 2.3.2 结算方式与eCPM估计的关系
* CPT(Cost per Time)
  * 广告位按时收费
* CPM(Cost per Mille)
  * 千次展示收费
* CPC(Cost per click)
  * 按点击结算
* CPS(Cost per Sale)
  * 按销售结算
* oCPM(optimized CPM)
  * 仍按CPM结算费用，但会根据转化率进行优化。

### 2.4 在线广告相关行业协会
* 交互广告局
* 美国广告代理协会
* 美国国家广告商协会

# 第二部分 在线广告产品逻辑

## 第三章 在线广告产品预览
### 发展历程
* 合约广告产品
  * 由线下广告交易衍生而来，CPT或CPM
  * 服务于后续效果不易直接衡量的品牌类广告
* 竞价广告产品
  * 最重要的形式是搜索广告，对搜索关键词进行竞价
* 程序化交易广告产品
  * 实时竞价的的广告交易形式
* 原生广告产品
  * 处理与非商业化内容的关系，让广告与内容尽可能以原生的方式共存。

* 广告产品的3中基本组成部分
  * 面向需求方的接口
  * 面向供给方的接口
  * 中间的投放系统及匹配策略

### 3.1 商业产品的设计原则
* 面向商业客户而不是一般客户的产品
* 总体原则：优化既定商业目标
* 商业产品运营关键点
  * 相对于产品功能，要特别关注产品中的策略部分
  * 要特别关注数据，让运营和产品优化形成闭环
  * 在所有与使用者打交道的产品界面上，用户产品追求便捷性的设计原则依然重要。

### 3.2 广告系统的产品接口
#### 3.2.1 广告主层级组织与投放管理
* 广告的层次
  * 广告主
  * 推广计划：广告主的一次投放合同
  * 推广组：一个具体广告的投放策略
  * 广告创意：最终展示的素材
#### 3.2.2 供给方管理接口
* 供给方资源：媒体和广告位

#### 3.2.3 供需之间的多种接口形式
* Web: 嵌入JS代码
* IOS/Android: 应用中继承供给方SDK
* 采用API
* 投放
  * 通过用户界面人工管理投放
  * 广告平台提供API
  * 嵌入JS代码
## 第四章 合约广告
* 在线广告的初始阶段，线下广告的商业逻辑被照搬到了线上，对技术的依赖不大，尤其是CPT结算模式。

### 4.1 广告位合约
* 缺点：无法按受众投放广告，所以无法进行深入的效果优化。
* 优点：特定场景下可带来品牌冲击和橱窗效益

### 4.2 受众定向
* 两个关键点
  * 定向的效果
  * 定向的规模
* 用户唤醒

#### 4.2.1 受众定向方法预览
* 地域定向
* 人口属性定向
* 上下文定向
* 行为定向
* 精确位置定向
* 重定向
* 新客推荐定向
* 动态定价
* 场景定价

#### 4.2.2 受众定向标签体系
* 两种组织方式
  * 分类法，taxonomy
    * 制定一个层次标签体系，其中上层的标签是下一层的父节点，在人群覆盖上是包含关系
    * 面向品牌广告的受众定向，采用结构化较强的标签体系。
  * 根据广告主的具体需求设置相应的标签，不存在明确的父子关系。
* 选择标签体系更多的是商业决策
  * 当标签作为广告投放的直接标的时，层级化方案合适
  * 当标签仅是投放系统需要的中间变量，不需要太多的层次关系

#### 4.2.3 标签体系的设计思路
* 最关键的环节：如何描述用户，如何设计标签体系

### 4.3 展示量合约
* CPM广告是互联网主流的广告投放模式

#### 4.3.1 流量预测
* CPM售卖的是某特定人群上的广告曝光次数，流量预测起到3个作用
  * 售前指导
  * 在线流量分配
  * 出价指导

#### 4.3.2 流量塑形
* 主动影响流量

#### 4.3.3 在线分配
* 各个合约的要求的人群可能大量交叠，设计的分配策略要使各个合约都尽可能被满足。
* 二部图(bipartite graph)匹配问题
  * 一方表示广告库存的供给节点
  * 另一方表示广告合约的需求节点

### 4.3.4 产品案例
* Yahoo! GD
## 第五章 搜索广告与竞价广告
* 将量的约束从交易过程中去除，仅采用价高者得的简单决策方案在投放广告
* 在变现能力和市场规模中都有优势

### 5.1 搜索广告

#### 5.1.1 搜索广告产品形态
* 以查询词为粒度进行受众定向，按照竞价方式售卖，按CPC结算的广告产品
* 特点
  * 变现能力，用户主动输入的查询直接反映了用户的意图
  * 搜索广告的受众定向标签
  * 搜索广告的展现形式与自然结果的展示形式非常接近
  * 从搜索广告发展起来的竞价交易模式，以及逐渐发展成为互联网广告的最主流交易模式。

#### 5.1.2 搜索广告产品新形式
* 丰富文字链
  * 增加更多有表现力的信息点，如广告主的logo、主要内容链接、联系电话等内容。
  * 直接展示结构化的广告内容摘要
* 拓展广告产品
  * 搜索引擎右侧的产品原则与左侧相比，可以在合理和可解释的范围内增加一些相关性要求稍低的泛化内容。
* 优化广告和自然结果的关系
  * 由用户的主动意图出发，并且在展示形式上与自然结果相差不大。

#### 5.1.3 搜索广告产品策略
* 查询扩展
  * 精确匹配
  * 短语匹配
  * 广泛匹配
  * 否定匹配
* 广告放置
  * 当广告候选完成排序后，需要分别确定北区和东区的广告条数。
  * 北区是黄金广告的展示位置，产生绝大部分收入
    * 相关性是否足够
    * 该广告的RPM(North Foot Print)是否足够

#### 5.1.4 产品案例
* Google AdWords
  * 一开始使用简单的按广告主出价高低展示的方式。
  * 缺陷：虽然出价高，但是点击率低，还是没有收入。
  * 改成了eCPM策略，预测广告点击率，然后按点击率和出价的乘积大小对广告排序。
* 淘宝直通车

### 5.2 位置拍卖与机制设计
* 以搜索广告为代表的竞价广告实际上是用拍卖的方式销售广告展示机会的。
#### 5.2.1 市场保留价(Market Reserve Price, MRP)
* 为了控制广告的质量和保持一定的出售单价，竞价广告往往需要设置一个赢得拍卖的最低价格。
* 无论是调整市场整体的MRP，还是在不同流量划分上动态设置MRP，其基本原理都是根据竞价广告主的eCPM分布，找到一个使填充率没有明显下降的CPM底价，然后再根据其质量度倒推其CPC底价。

#### 5.2.2 定价问题
* 如何在一次位置拍卖中，给定各参与者的出价以及他们的期望收益，如何对最后获得某个位置的广告商收取合适的费用。

#### 5.2.3 价格挤压
* 价格挤压因子的作用主要是能够根据市场情况，更主动地影响竞价体系向着需要的方向发展。

#### 5.2.4 Myerson最优拍卖
* 广告平台关注的是使收入最优方法，当拍卖的标的是单个的不可分物品时，Myerson拍卖是理论上的最优机制。

#### 5.2.5 定价结果示例

### 5.3 竞价广告网络
* 批量聚合各个媒体的剩余流量，按照人群或上下文标签的流量切割方式售卖给广告主

#### 5.3.1 广告网络产品形态
* 广告网络中的投放决策过程对媒体而言类似于一个黑盒子，只需要在广告位的剩余流量上调用广告网络的投放代码或SDK，而不用关心每次展示的投放结果。
* 竞价广告网络特点
  * 竞价方式不像广告主做量的约定，而是根据变现能力，即eCPM，来决定每次展示分配给哪个广告主。
  * 由于是按人群售卖，广告网络会极力淡化媒体和广告位概念。
  * 从商业角度看，广告网络得到销售模式与合约的方式相比，无须再满足广告主品牌独占的要求。
  * 由于广告网络根据实际消耗来结算，一般采用先充值的方式，使广告网络运营方的现金流得到改善。

#### 5.3.2 广告网络产品策略
* 广告检索
* 广告排序

#### 5.3.3 产品案例
* Google Display Network

### 5.4 竞价广告需求方产品
* 原来通过直接与媒体签订保量合约的采买方式，变成了通过竞价为广告主完成量与质需求的采买产品。
#### 5.4.1 搜索引擎营销(SEM)
* 通过竞价采买搜索引擎关键词来做推广。

#### 5.4.2 交易终端
* 面向ADN, DSP等的一站式采买平台称为交易终端。
#### 5.4.3 产品案例
* Efficient Frontier

### 5.5 竞价广告与合约广告对比
* 市场经济和计划经济



### 5.3.2 广告网络产品策略




## 第六章 程序化交易广告

## 第七章 数据加工交易

## 第八章 信息流与原生广告

# 第三部分 计算广告关键技术

## 第九章 计算广告技术概览

## 第十章 基础知识准备

## 第十一章 合约广告核心技术

## 第十二章 受众定向核心技术

## 第十三章 竞价广告核心技术

## 第十四章 点击率预测模型

## 第十五章 程序化交易核心技术

## 第十六章 其他广告相关技术